<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lernspiel-Sammlung - Karteikasten Edition</title>
    <style>
        /* --- GRUNDSTIL --- */
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Comic Sans MS', cursive, sans-serif; overflow: hidden; }

        #main-menu {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100vh; background: linear-gradient(135deg, #7ed957, #5d8aff);
        }
        .menu-card { background: white; padding: 40px; border-radius: 40px; text-align: center; box-shadow: 0 15px 30px rgba(0,0,0,0.2); }
        .menu-btn {
            display: block; width: 100%; padding: 20px; margin: 15px 0;
            font-size: 22px; font-weight: bold; border: none; border-radius: 20px;
            cursor: pointer; color: white; transition: 0.2s;
        }
        .btn-g1 { background-color: #4CAF50; }
        .btn-g2 { background-color: #5d8aff; }
        .btn-g3 { background-color: #ff9800; }
        
        /* --- DAS NEUE LAYOUT-SYSTEM --- */
        .game-wrapper { 
            display: none; 
            width: 100vw; 
            height: 100vh; 
            flex-direction: row; /* Standard: Nebeneinander */
            align-items: center; 
            justify-content: center; 
            gap: 20px;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Responsive Anpassung f√ºr Hochformat (iPad/Handy) */
        @media (max-width: 900px) or (orientation: portrait) {
            .game-wrapper { flex-direction: column; }
            .box-sidebar { width: 90% !important; flex-direction: row !important; }
        }

        /* Der Rahmen f√ºr die Karteiboxen (Sidebar) */
        .box-sidebar {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 25px;
            border: 3px solid rgba(255,255,255,0.5);
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 120px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        /* Das Haupt-Aufgabenfenster */
        .task-container {
            background-color: white; 
            padding: 30px; 
            border-radius: 40px; 
            box-shadow: 0 15px 0px rgba(0,0,0,0.1); 
            text-align: center; 
            flex-grow: 1;
            max-width: 700px;
            width: 100%;
            border: 6px solid #fff;
        }

        /* Titelzeile innerhalb der Aufgabe */
        .game-title-header {
            font-size: 24px;
            color: #1e3a8a;
            margin-bottom: 20px;
            font-weight: bold;
            border-bottom: 2px dashed #eee;
            padding-bottom: 10px;
        }

        /* Boxen-Styling */
        .box-indicator {
            background: white; border: 2px solid #ccc; border-radius: 12px;
            padding: 8px; flex: 1; text-align: center;
        }
        .goal-box { border-color: #ffd700; background: #fffdf0; }
        .box-label { font-size: 10px; display: block; color: #666; font-family: sans-serif; }
        .box-count { font-size: 20px; font-weight: bold; }

        /* Spezifische Spiel-Farben f√ºr die Rahmen */
        .g1-border { border-color: #7ed957; box-shadow: 0 15px 0px #aad922; }
        .g2-border { border-color: #5d8aff; box-shadow: 0 15px 0px #adc4ff; }
        .g3-border { border-color: #0288d1; box-shadow: 0 15px 0px #81d4fa; }

        /* --- RESTLICHER CODE (Gek√ºrzt f√ºr √úbersicht) --- */
        .back-btn { position: absolute; top: 15px; left: 15px; padding: 10px 20px; background: #333; color: white; border-radius: 15px; cursor: pointer; border: none; z-index: 100; }
        .hidden { display: none !important; }
        input#g2-user-input { font-size: 40px; width: 100px; border: 3px solid #5d8aff; border-radius: 10px; text-align: center; }
        #g1-word-display { font-size: 50px; margin: 20px; }
        .g1-btn { padding: 15px 30px; font-size: 20px; border-radius: 20px; border: none; color: white; cursor: pointer; }
        .g1-correct { background: #4CAF50; } .g1-wrong { background: #F44336; }
        #teacher-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: none; justify-content: center; align-items: center; }
        .teacher-card { background: white; padding: 25px; border-radius: 20px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto; }
    </style>
</head>
<body class="g1-body" style="background: linear-gradient(135deg, #7ed957, #5d8aff);">

    <div id="main-menu">
        <div class="menu-card">
            <h1>Lernspiel-Sammlung</h1>
            <button class="menu-btn btn-g1" onclick="startG1()">Rechtschreib-Held</button>
            <button class="menu-btn btn-g2" onclick="startG2()">Rechtschreib-Profi</button>
            <button class="menu-btn btn-g3" onclick="startG3()">Schreib-Profi</button>
            <button class="menu-btn" style="background: #9c27b0;" onclick="toggleTeacher(true)">‚öôÔ∏è Lehrerbereich</button>
        </div>
    </div>

    <div id="wrapper1" class="game-wrapper">
        <button class="back-btn" onclick="goToMenu()">üè† Men√º</button>
        
        <div class="box-sidebar" id="g1-box-status">
            </div>

        <div id="g1-container" class="task-container g1-border">
            <div id="display-title-g1" class="game-title-header">Titel Spiel 1</div>
            <div id="g1-game-screen">
                <div id="g1-progress">Frage 1 von 10</div>
                <div id="g1-word-display">Wort</div>
                <div style="display:flex; gap:20px; justify-content:center;">
                    <button class="g1-btn g1-correct" onclick="Game1.handleAnswer(true)">RICHTIG</button>
                    <button class="g1-btn g1-wrong" onclick="Game1.handleAnswer(false)">FALSCH</button>
                </div>
                <div id="g1-feedback" style="font-size:24px; margin-top:15px;"></div>
            </div>
            <div id="g1-result-screen" class="hidden">
                <h2>Fertig!</h2>
                <button class="menu-btn btn-g1" onclick="Game1.startGame()">Nochmal</button>
            </div>
        </div>
    </div>

    <script>
        // ... (Der JavaScript-Teil bleibt im Kern identisch zur vorherigen Version) ...
        // WICHTIG: In BoxSystem.updateBoxDisplay() m√ºssen wir sicherstellen, 
        // dass die Boxen in die neue Sidebar gerendert werden.

        function startG1() { 
            updateDisplayTitles(); 
            document.getElementById('main-menu').style.display = 'none'; 
            document.getElementById('wrapper1').style.display = 'flex'; 
            Game1.startGame(); 
        }

        // ... Rest des Codes wie zuvor ...
    </script>
</body>
</html>
